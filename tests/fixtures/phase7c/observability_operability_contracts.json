{
  "version": "phase7c-observability-contracts-v1",
  "contracts": [
    {
      "id": "phase7c.trace_propagation_headers",
      "claim": "Request correlation and trace context are propagated deterministically through response headers, logs, and trace exporter payloads.",
      "source_docs": [
        "docs/PHASE7C_OBSERVABILITY_OPERABILITY.md",
        "docs/CLI_REFERENCE.md"
      ],
      "verification": [
        {
          "kind": "unit",
          "file": "tests/unit/ApplicationTests.m",
          "test": "testResponseIncludesTracePropagationHeadersAndCorrelationByDefault"
        },
        {
          "kind": "unit",
          "file": "tests/unit/ApplicationTests.m",
          "test": "testTraceExporterReceivesTraceContextMetadata"
        },
        {
          "kind": "integration",
          "file": "tests/integration/HTTPIntegrationTests.m",
          "test": "testTraceparentAndCorrelationHeadersAreEmitted"
        }
      ]
    },
    {
      "id": "phase7c.health_readiness_json_signals",
      "claim": "Built-in health/readiness signals provide deterministic JSON payloads and strict readiness can fail with deterministic 503 behavior.",
      "source_docs": [
        "docs/PHASE7C_OBSERVABILITY_OPERABILITY.md",
        "docs/DEPLOYMENT.md"
      ],
      "verification": [
        {
          "kind": "unit",
          "file": "tests/unit/ApplicationTests.m",
          "test": "testHealthzJSONPayloadIncludesDeterministicSignalChecks"
        },
        {
          "kind": "unit",
          "file": "tests/unit/ApplicationTests.m",
          "test": "testReadyzJSONCanRequireStartedStateAndReturnDeterministic503"
        },
        {
          "kind": "integration",
          "file": "tests/integration/HTTPIntegrationTests.m",
          "test": "testHealthEndpointSupportsJSONSignalPayload"
        }
      ]
    },
    {
      "id": "phase7c.deploy_operability_validation_script",
      "claim": "Deployment smoke runbook executes an operability validation script that checks text and JSON probes before declaring release success.",
      "source_docs": [
        "docs/PHASE7C_OBSERVABILITY_OPERABILITY.md",
        "docs/DEPLOYMENT.md"
      ],
      "verification": [
        {
          "kind": "integration",
          "file": "tests/integration/DeploymentIntegrationTests.m",
          "test": "testReleaseSmokeScriptValidatesDeployRunbook"
        }
      ]
    }
  ]
}
